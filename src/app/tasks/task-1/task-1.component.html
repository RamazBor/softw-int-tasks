<form class="example-form" [formGroup]="myForm">
  <h1>Reactive Form</h1>
  <div class="form-field-job" formArrayName="job">
    @for(exp of myForm.get('job')?.value; let i = $index; track i)
    {
    <div class="job" [formGroupName]="i">
      <label>Job {{ i + 1 }}</label
      ><br />
        <div class="column">
          <mat-form-field>
            <mat-label>Company Name</mat-label>
            <input matInput  formControlName="companyName">
          </mat-form-field>
          <mat-form-field>
            <mat-label>Company Web Address</mat-label>
            <input matInput  formControlName="companySiteUrl">
          </mat-form-field>
        </div>
        <div class="column">
          <mat-form-field class="description">
            <mat-label>Company Description</mat-label>
            <input matInput  formControlName="companyDescription">
          </mat-form-field>
        </div>
        <div class="positions" formArrayName="positions">
          @for(pos of myForm.get('job')?.value[i]?.positions; let j = $index; track j)
          {
          <div class="position" [formGroupName]="j">
            <label>Position {{ j + 1 }}</label>
            <div class="column">
              <mat-form-field>
                <mat-label>Position</mat-label>
                <input matInput  formControlName="position">
              </mat-form-field>
              <mat-form-field>
                <mat-label>Select level</mat-label>
                <mat-select formControlName="level">
                  @for(level of levels; let i = $index; track i) {
                    <mat-option value="option1">{{level}}</mat-option>
                  }
                </mat-select>
              </mat-form-field>
            </div>
            <div class="column">
              <mat-form-field>
                <mat-label>Description</mat-label>
                <input matInput  formControlName="description">
              </mat-form-field>
              <mat-form-field class="example-form-field">
                <mat-label>Enter a date range</mat-label>
                <mat-date-range-input [rangePicker]="rangePicker">
                  <input matStartDate placeholder="Start date" formControlName="startDate"/>
                  <input matEndDate placeholder="End date" formArrayName="endDate"/>
                </mat-date-range-input>
                <mat-hint>MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle matIconSuffix [for]="rangePicker"></mat-datepicker-toggle>
                <mat-date-range-picker #rangePicker>
                  <mat-date-range-picker-actions>
                    <button mat-button matDateRangePickerCancel>Cancel</button>
                    <button mat-raised-button matDateRangePickerApply>Apply</button>
                  </mat-date-range-picker-actions>
                </mat-date-range-picker>
              </mat-form-field>
            </div>
          </div>
          <button class="delete-position btn" (click)="deletePosition(i, j)">
            Delete Position
          </button>
          }
          <button class="add-position btn" (click)="addPosition(i)">
            Add Position
          </button>
        </div>
      <button
        mat-flat-button
        class="delete-job btn"
        (click)="deleteJob(i)"
      >
        Delete Job
      </button>
    </div>
    }
    <button mat-flat-button (click)="addJob()">Add Job</button>
  </div>
  <button class="submit btn">
    Submit
  </button>
</form>
